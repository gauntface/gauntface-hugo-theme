{"version":3,"file":"n-hopin-styleguide-js-dimensions-grid-async.js","sources":["../../../../src/static/styleguide/js/_friendly-name.ts","../../../../src/static/styleguide/js/_clipboard.ts","../../../../src/static/styleguide/js/_create-table.ts","../../../../src/static/styleguide/js/n-hopin-styleguide-js-dimensions-grid-async.ts","../../../../src/static/styleguide/js/_variable-group.ts"],"sourcesContent":["export function friendlyName(varName: string): string {\n  const parts = varName.split(/_|-/g);\n  const words: string[] = [];\n  for (const p of parts) {\n    if (p == '') {\n      continue;\n    }\n\n    words.push(p.charAt(0).toUpperCase()  + p.slice(1).toLowerCase());\n  }\n  return words.join(' ');\n}\n\nexport function friendlyNameFromURL(urlString: string): string {\n  const filenameWithExt = urlString.substring(urlString.lastIndexOf('/')+1);\n  const filename = filenameWithExt.substring(0, filenameWithExt.lastIndexOf('.'));\n  return friendlyName(filename);\n}","export function copyToClipboard(txt: string): boolean {\n  const hiddenElement = document.createElement('div');\n  hiddenElement.textContent = txt;\n  document.body.appendChild(hiddenElement);\n\n  var range = document.createRange();\n  range.selectNode(hiddenElement);\n\n  window.getSelection().empty()\n  window.getSelection().addRange(range);\n\n  let success = false;\n  try {\n    // Now that we've selected the anchor text, execute the copy command\n    success = document.execCommand('copy');\n  } catch(err) {\n    console.log('Error thrown when copying text: ', err);\n  }\n\n  // Remove the selections\n  window.getSelection().removeRange(range);\n  document.body.removeChild(hiddenElement);\n\n  return success;\n}","import {Variable} from './_variable-group';\nimport {copyToClipboard} from './_clipboard';\n\nconst NAMESPACE_CLASS = 'n-hopin';\nconst VAR_TABLE_CLASS = 'c-variable-table';\n\nexport function createVariableTable(variables: Variable[]): HTMLElement {\n    const columns = [\"Variable Name\", \"Value\", \"\"];\n    const rows: Array<Array<string|HTMLElement>> = []\n    for (const v of variables) {\n        const copyText = document.createElement('div');\n      copyText.textContent = 'Copy';\n      copyText.addEventListener('click', (e) => {\n        e.preventDefault();\n        const success = copyToClipboard(v.variableName);\n        if (success) {\n          copyText.textContent = 'Copied';\n          setTimeout(() => {\n            copyText.textContent = 'Copy';\n          }, 1000);\n        }\n      });\n      rows.push([v.variableName, v.value, copyText]);\n    }\n    return createTable({\n        columns,\n        rows,\n    });\n}\n\nexport function createTable(data: VARIABLE_TABLE): HTMLElement {\n    const table = document.createElement('table');\n    table.classList.add(NAMESPACE_CLASS);\n    table.classList.add(VAR_TABLE_CLASS);\n    \n    const tblHead = document.createElement('thead');\n    const tblBody = document.createElement('tbody');\n    table.appendChild(tblHead);\n    table.appendChild(tblBody);\n\n    const headRow = document.createElement('tr');\n    for (const c of data.columns) {\n        const heading = document.createElement('th');\n        heading.textContent = c;\n        headRow.appendChild(heading);\n    }\n    tblHead.appendChild(headRow);\n\n    for (const r of data.rows) {\n        const row = document.createElement('tr');\n        for (const rd of r) {\n            const col = document.createElement('td');\n            if (rd instanceof HTMLElement) {\n                col.appendChild(rd);\n            } else if (typeof rd === 'string') {\n                col.textContent = rd;\n            } else if (rd['variable']) {\n                // This occurs if the CSS variable\n                // is an assignment of another CSS variable.\n                col.textContent = rd['variable'];\n            }\n            row.appendChild(col);\n        }\n        tblBody.appendChild(row);\n    }\n    return table;\n}\n\ninterface VARIABLE_TABLE {\n    columns: string[];\n    rows: Array<Array<string|HTMLElement>>;\n}"," \nimport {VariableGroup, Variable} from './_variable-group';\nimport {createVariableTable} from './_create-table';\n\nconst DIMENS_SELECTOR = '.n-hopin-styleguide-js-dimensions-grid';\n\nclass DimensTable extends VariableGroup {\n    constructor() {\n        super(DIMENS_SELECTOR);\n    }\n\n    renderData(variables: Variable[]): HTMLElement[] {\n        return [createVariableTable(variables)];\n    }\n}\n\nwindow.addEventListener('load', function() {\n    if (!document.querySelector(DIMENS_SELECTOR)) {\n        return\n    }\n    new DimensTable().render();\n});","import { friendlyName, friendlyNameFromURL } from \"./_friendly-name\";\n\nconst namespace = 'n-hopin-styleguide-';\nconst GROUP_CONTAINER_CLASS = `${namespace}c-variable-group`;\nconst GROUP_TITLE_CLASS = `${namespace}c-variable-group__title`;\n\nexport abstract class VariableGroup {\n    constructor(private containerSelector: string) {}\n\n    getGroups(): Group[] {\n        const groups: { [key: string]: Group; } = {};\n        for (const s of document.styleSheets) {\n            try {\n                const element = s.ownerNode as HTMLElement;\n                if (!element.classList.contains('n-hopin-styleguide-js-load-static-css')) {\n                    continue;\n                }\n                if (!s.href) {\n                    continue;\n                }\n\n                if (groups[s.href]) {\n                  continue;\n                }\n\n                const group: Group = {\n                    prettyName: friendlyNameFromURL(s.href),\n                    href: s.href,\n                    variables: [],\n                };\n\n                const cssStylesheet = s as CSSStyleSheet;\n                for (const r of cssStylesheet.cssRules) {\n                    const cssStyleRule = r as {\n                        styleMap?: StyleMap\n                    };\n                    if (cssStyleRule['styleMap']) {\n                        const map = cssStyleRule['styleMap'];\n                        for (const e of map.entries()) {\n                            // The format of e is [\"<param name>\", [[\"<value>\"]]]\n                            const name = e[0] as string;\n                            if (name.indexOf('--') === 0) {\n                                let unparsedValue = e[1][0] as CSSUnparsedValue;\n                                group.variables.push({\n                                    prettyName: friendlyName(name),\n                                    variableName: name,\n                                    value: unparsedValue.toString().trim(),\n                                });\n                            }\n                        }\n                    }\n                }\n                groups[s.href] = group;\n            } catch (err) {\n                // External stylesheets will not be accessible from JavaScript\n                // in which case this error will be thrown.\n                console.error(`Unable to read styles for ${s.href}`, err);\n            }\n        }\n        return Object.values(groups);\n    }\n\n    render() {\n        const containerElement = document.querySelector(this.containerSelector);\n        if (!containerElement) {\n            console.warn(`Unable to find container with selector ${this.containerSelector}`)\n            return;\n        }\n\n        const groups = this.getGroups();\n        console.log(`Rendering the following groups:`, groups);\n        for (const g of groups) {\n            const groupContainer = document.createElement('section');\n            groupContainer.classList.add(GROUP_CONTAINER_CLASS);\n\n            if (g.prettyName) {\n                const title = document.createElement('h2');\n                title.classList.add(GROUP_TITLE_CLASS);\n                title.textContent = g.prettyName;\n                groupContainer.appendChild(title);\n            }\n\n            const elements = this.renderData(g.variables);\n            for (const e of elements) {\n                groupContainer.appendChild(e);\n            }\n            containerElement.appendChild(groupContainer);\n        } \n    }\n\n    abstract renderData(variables: Variable[]): HTMLElement[];\n} \n\ninterface Group {\n    prettyName: string|null;\n    href: string;\n    variables: Variable[];\n}\n\nexport interface Variable {\n    prettyName: string|null;\n    variableName: string;\n    value: string;\n}\n\ninterface StyleMap {\n    entries: () => Array<string|Array<string>>;\n}"],"names":["friendlyName","varName","parts","split","words","p","push","charAt","toUpperCase","slice","toLowerCase","join","friendlyNameFromURL","urlString","filenameWithExt","substring","lastIndexOf","copyToClipboard","txt","hiddenElement","document","createElement","textContent","body","appendChild","range","createRange","selectNode","window","getSelection","empty","addRange","success","execCommand","err","console","log","removeRange","removeChild","createVariableTable","variables","rows","v","copyText","addEventListener","e","preventDefault","variableName","setTimeout","value","data","table","classList","add","tblHead","tblBody","headRow","c","columns","heading","r","row","rd","col","HTMLElement","createTable","DimensTable","[object Object]","containerSelector","this","groups","s","styleSheets","ownerNode","contains","href","group","prettyName","cssStylesheet","cssRules","cssStyleRule","map","entries","name","indexOf","unparsedValue","toString","trim","error","Object","values","containerElement","querySelector","warn","getGroups","g","groupContainer","title","elements","renderData","super","render"],"mappings":"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"}